---
layout: default
---

## Что vk-бот из себя представляет.

> Чат-бот – это программа-собеседник имитирующая человеческое общение при помощи текста или голоса.
![бот](https://github.com/fplve/vika/raw/gh-pages/assets/images/PsfnPFL-LwQ.jpg)
> Чат-боты помогают автоматизировать задачи, работая по заданному алгоритму. Они ведут диалог с пользователем, выполняя его просьбы, отвечая на запросы или развлекая своими ответами.
> 
> Одним из первых виртуальных собеседников была программа Элиза, созданная в 1966 году Джозефом Вейзенбаумом. Элиза пародировала речевое поведение психотерапевта, реализуя технику активного слушания, переспрашивая пользователя и используя фразы типа «Пожалуйста, продолжайте».

### Модуль cmdlist.php

Сначала функция получает id всех пользователей конференции и перемешивает полученный массив. Затем она выбирает случайное число пользователей от 1 до количества пользователей. Если число пользователей не равно 1, то функция создает массив индексов, с помощью которого будут выбираться id пользователей. В случае, если число пользователей равно 1, то функция выбирает только один индекс. Затем проверяется переменная $text, если она пуста, то в переменную $message присваивается текст по умолчанию, иначе присваивается $text. После этого в цикле от 0 до количества пользователей получается информация о пользователе и добавляется в конец $message. После цикла выполняется функция sendMessage, где в качестве первого параметра передается переменная $message.
```php
<?php
function cmdlist($text, $peer_id) {
    $arrayUsers = getArrayUsers($peer_id);
    shuffle($arrayUsers);
    $countUsers = rand(1, count($arrayUsers));
    if ($countUsers != 1) {
        $randUsers = array_rand($arrayUsers, $countUsers);
    } else {
        $randUsers[0] = array_rand($arrayUsers, $countUsers);
    }
    if (empty($text)) {
        $message = "# Список кого-то там:\r\n";
    } else {
        $message = "# Список {$text}:\r\n";
    }
    $number = 1;
    for ($i = 0; $i < $countUsers; $i++) {
        $user_id = $arrayUsers[$randUsers[$i]];
        $user = json_decode(getUserInfo($user_id));
        $message .= "{$number}. {$user->name} {$user->last_name}\r\n";
        $number++;
    }
    $message .= "# Конец списка";
    return sendMessage($message, null, $peer_id);
}
```